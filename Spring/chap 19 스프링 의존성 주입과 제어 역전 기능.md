# chap 19 스프링 의존성 주입과 제어 역전 기능

- 자바와 같은 객체 지향 프로그래밍 언어에서 클래스는 특정 기능을 수행하는 부품 역할
- 사용자의 요구 사항에 따라 클래스 기능을 변경하거나 다른 클래스 기능으로 대체해야 하는 경우가 자주 생긴다.
- 이러한 상황에서 좀 더 수월하게 대체할 수 있게 도입된 기능이 바로 의존성 주입과 제어 역행



## 19.1 의존성 주입하기

- 지금까지 우리가 프로그래밍을 할 때는 어떤 한 클래스가 다른 클래스의 기능을 사용하려면 당연히 개발자 직접 코드에서 사용할 클래스의 생성자를 호출하여 사용 즉, 사용할 클래스와 사용될 클래스의 관계는 개발자에 의해 직접 코드에서 부여

- **의존성 주입**이란 이런 연관 관계를 개발자가 직접 코딩을 통해 컴포넌트(클래스)에 부여하는 것이 아니라 **컨테이너가 관계를 직접 규정하는 것** (loosely coupled 약한 결합)

- 서로 관련이 있는 기능들은 **강하게 결합 (tightly coupled)** 하고, 관련이 없는 기능들은 **약하게 결합 (loosely coupled)** 해야 좋은 프로그램

- 스프링 프레임워크에서는 각 클래스들의 연관 관계를 클래스들 사이에서 맺는 것이 아니라 스프링 프레임워크에서 설정을 통해 맺어줌으로써 클래스들이 연관 관계를 갖지 않게 구현

- 의존성 주입을 적용했을 때 얻을 수 있는 장점

  - 클래스들 간의 의존 관계를 최소화하여 코드를 단순화할 수 있다.
  - 애플리케이션을 더 쉽게 유지 및 관리
  - 기존 구현 방법은 개발자가 직접 코드 안에서 객체의 생성과 소멸을 제어 하지만 의존성 주입은 객체의 생성, 소멸과 객체 간의 의존 관계를 컨테이너가 제어

-  DI는  XML이나 애너테이션 설정을 통해 경량 컨테이너에 해당하는 스프링 프레임워크가 제어

- 따라서 기존 코드에서는 개발자가 직접 객체를 제어했지만 스프링에서는 객체의 제어를 스프링이 직접 담당하므로 **제어의 역전 (IoC)** 이라고 한다.

  ```java
  public class BoardServiceIpml implements BoardService{
  	private BoardDAO boardDAO;
  	public BoardServiceImpl (BoardDAO boardDAO){
  	this.boardDAO = boardDAO; // DI 적용 예시
  	}
      ...
  }
  ```

  - BoardServiceImpl 클래스는 의존하는 BoardDAOImpl 객체를 전달받기 위해 new 키워드를 사용해 객체를 생성하지 않고 생성자를 호출할 때 외부에서 객체를 주입받아 사용
  - 소스 코드에서 new 를 사용해 객체를 생성하는 것이 아니라 BoardServiceImpl 생성자를 호출할 때 컨테이너에 의해 주입되는 객체로 boardDAO 변수를 초기화한 것



## 19.2 의존성 주입 실습

- XML 파일에서 빈을 생성하는 데 사용되는 <bean> 태그의 속성
  - id : 빈 객체의 고유 이름으로, 빈 id를 이용해 빈에 접근
  - name : 객체의 별칭
  - class : 생성할 클래스, 패키지 이름까지 입력해야 한다.
  - constructor-arg : 생성자를 이용해 값을 주입할 때 사용
  - property : setter를 이용해 값을 주입할 때 사용